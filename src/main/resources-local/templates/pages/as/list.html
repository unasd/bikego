<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="../layout/default">

<!-- page CSS -->
<th:block layout:fragment="css">
</th:block>

<!-- page 스크립트 -->
<th:block layout:fragment="script">
    <script type="text/javascript">
        function goPage(page){
            $('[name="listForm"]').children('[name="page"]').val(page);
            $('[name="listForm"]').submit();
        }

        $(document).ready(function() {
            $('select').formSelect();
        });
    </script>
</th:block>

<div layout:fragment="content" class="container">
    <a th:href="@{/as/post.do}">글쓰기</a>

    <table class="striped">
        <thead>
        <tr>
            <th class="one wide">번호</th>
            <th class="ten wide">글제목</th>
            <th class="two wide">작성자</th>
            <th class="three wide">작성일</th>
        </tr>
        </thead>

        <tbody>
        <!-- CONTENTS !-->
        <tr th:each="as : ${asList}">
            <td>
                <span th:text="${as.seqAs}"></span>
            </td>
            <td>
                <a th:href="@{'/as/post.do/' + ${as.seqAs}}">
                    <span th:text="${as.titleAs}"></span>
                </a>
            </td>
            <td>
                <span th:text="${as.writerAs}"></span>
            </td>
            <td>
                <span th:text="${#temporals.format(as.regdtAs, 'yyyy-MM-dd HH:mm')}"></span>
            </td>
        </tr>
        </tbody>
    </table>
    <div class="input-field col s12">
        <select name="searchKey">
            <option value="" disabled selected>검색조건</option>
            <option value="SCHTITLE">제목</option>
            <option value="SCHCONTENTS">내용</option>
            <option value="SCHLOCATION">위치</option>
            <option value="SCHWRITER">작성자</option>
        </select>
    </div>
    <div class="input-field col s6">
        <input id="searchKeyword" name="searchKeyword" type="text" class="validate">
        <label for="searchKeyword">검색어</label>
    </div>
    <span th:text="${searchKeys}"/>
    <span th:text="${searchKeys}"/>
    <th:block th:if="${not #lists.isEmpty(asList)}">
        <ul class="pagination">
            <th:block th:if="${pagingResult.hasPrevious}">
                <li class="waves-effect"><a th:onclick="|javascript:goPage('${pagingResult.page-1}');|"><i class="material-icons">chevron_left</i></a></li>
            </th:block>
            <th:block th:unless="${pagingResult.hasPrevious}">
                <li class="disabled"><a><i class="material-icons">chevron_left</i></a></li>
            </th:block>

            <li th:each="pageCount : ${#numbers.sequence(pagingResult.startPage, pagingResult.endPage)}" th:class="${pagingResult.page == pageCount ? 'active' : 'waves-effect'}">
                <th:block th:if="${pagingResult.page == pageCount}"><a th:text="${pageCount}"></a></th:block>
                <th:block th:unless="${pagingResult.page == pageCount}"><a th:onclick="|javascript:goPage('${pageCount}');|" th:text="${pageCount}"></a></th:block>
            </li>

            <th:block th:if="${pagingResult.hasNext}">
                <li class="waves-effect"><a th:onclick="|javascript:goPage('${pagingResult.page+1}');|"><i class="material-icons">chevron_right</i></a></li>
            </th:block>
            <th:block th:unless="${pagingResult.hasNext}">
                <li class="disabled"><a><i class="material-icons">chevron_right</i></a></li>
            </th:block>
        </ul>
    </th:block>
    <form name="listForm" method="get" action="/as/list.do">
        <input type="hidden" name="page" th:value="${pagingResult.page}"/> <!-- 필수 -->
        <input type="hidden" name="listSize" th:value="${pagingResult.listSize}"/>
        <input type="hidden" name="pageSize" th:value="${pagingResult.pageSize}"/>
        <input type="hidden" name="direction" th:value="${pagingResult.direction}"/>
        <input type="hidden" name="sortProp" th:value="${pagingResult.sortProp}"/>
    </form>
</div>
</html>
