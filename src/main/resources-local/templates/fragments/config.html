<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head th:fragment="configFragment">
    <meta charset="UTF-8" />

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
    <!-- common CSS -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="/static/lib/materialize/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="/static/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
    <!-- page CSS -->
    <th:block layout:fragment="css"></th:block>

    <!-- common JS -->
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="/static/lib/materialize/js/materialize.js"></script>
    <script src="/static/lib/materialize/js/init.js"></script>
    <script src="/static/lib/ckeditor/ckeditor.js"></script>
    <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>-->
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=6350d7d46556d678c60fc61ab6c4a22b&libraries=services"></script>

    <!--slider-->
    <!--<script  src="/static/lib/slide/jquery-ui.min.js" type="text/javascript"></script>-->
    <script src="/static/lib/slide/jquery.bxslider.js" type="text/javascript" ></script>
    <link rel="stylesheet" type="text/css" href="/static/css/jquery.bxslider.css"/>


    <script type="text/javascript">
        $(document).ready(function() {
            $('#alertModal').modal({
                 onCloseEnd: function() {
                    $('#alertModal').find('h4').text('');
                    $('#alertModal').find('p').text('');
                 }
            });

            $('#imageModal').modal({
                onOpenStart: function(e) {
                    let imgTags = $('.slide-img');
                    let selectedImg = $('.slide-img:hover');
                    let imgIndex = imgTags.index(selectedImg);
                    let imgSrc = selectedImg.css('background-image');

                    // 클릭한 이미지
                    if(typeof(imgSrc) != "undefined") {
                        imgSrc = imgSrc.replace('url(','').replace(')','').replace(/\"/gi, "");
                        $('.modal-slide').eq(0).css({'background-image' : 'url('+ imgSrc +')'});
                    }
                    $('#imageModal').find('#numbertext').text((imgIndex+1) + '/' + imgTags.length);

                    // 이미지 슬라이드효과
                    $('#imageModal').find('.prev').on('click', function(){
                        if(imgIndex <= 0) { // 맨처음 이미지일 때
                            imgIndex = imgTags.length-1;
                        } else {
                            imgIndex--;
                        }
                        imgSrc = imgTags.eq(imgIndex).css('background-image');
                        imgSrc = imgSrc.replace('url(','').replace(')','').replace(/\"/gi, "");
                        $('.modal-slide').eq(0).css({'background-image' : 'url('+ imgSrc +')'});
                        $('#imageModal').find('#numbertext').text((imgIndex+1) + '/' + imgTags.length);
                    });
                    $('#imageModal').find('.next').on('click', function(){
                        if(imgIndex >= imgTags.length-1) { // 마지막 이미지일 때
                            imgIndex = 0;
                        } else {
                            imgIndex++;
                        }
                        imgSrc = imgTags.eq(imgIndex).css('background-image');
                        imgSrc = imgSrc.replace('url(','').replace(')','').replace(/\"/gi, "");
                        $('.modal-slide').eq(0).css({'background-image' : 'url('+ imgSrc +')'});
                        $('#imageModal').find('#numbertext').text((imgIndex+1) + '/' + imgTags.length);
                    });
                },
                onCloseEnd: function() {
                    $('#imageModal').find('#numbertext').text('');
                    $('#imageModal').find('.prev').off('click');
                    $('#imageModal').find('.next').off('click');
                 }
            });

            $('#confirmModal').modal({
                 onCloseEnd: function() {
                    $('#confirmModal').find('h4').text('');
                    $('#confirmModal').find('p').text('');
                    $('#confirmModal').find('.modal-close').off('click');
                 }
            });
        });
    </script>


    <!-- Main Slide JS -->
   <!-- <script  src="/static/lib/slide/jq.rolling.js" type="text/javascript"></script>
    <link rel="stylesheet" type="text/css" href="/static/css/jq.rolling.css"/>
    -->

    <!-- page JS -->
    <th:block layout:fragment="script"></th:block>
</head>

</html>